pipeline {
    agent any 
    stages {
        stage('Build docker images & install'){
            steps {
                 bat """ ECHO Get docker images and start them """^
                  """ docker-compose up -d"""
            }
        }
        stage('Start testing'){
            steps {
                 bat """ python -m pip install -U pytest """^
                 """ pytest .\test.py """
            }
        }
        stage('Deploy'){
            steps {
                 bat """ ECHO Finished """^
                  """ docker-compose down """
            }
        }
    }
}
