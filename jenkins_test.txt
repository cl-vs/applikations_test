#!groovy
@Library('jenkins_library') _

pipeline {
    agent any 
    stages {
        stage('Build docker images & install'){
            steps {
                 bat """ ECHO Get docker images and start them """
                 bat """ docker-compose up -d"""
            }
        }
        stage('Start testing'){
            steps {
                 bat """ python -m pip install -U pytest """
                 bat """ pytest .\test.py """
            }
        }
        stage('Deploy'){
            steps {
                 bat """ ECHO Finished """
                 bat """ docker-compose down """
            }
        }
    }
}
